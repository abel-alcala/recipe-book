import"./modulepreload-polyfill-B5Qt9EMX.js";const u=document.getElementById("register-form"),r=document.getElementById("error-message"),o=u.querySelector(".submit-button");u.addEventListener("submit",async a=>{a.preventDefault(),r.textContent="",r.style.display="none",o.classList.add("loading"),o.disabled=!0;const n=new FormData(u),i=n.get("password"),f=n.get("confirmPassword");if(i!==f){c("Passwords do not match"),l();return}if(i.length<=8){c("Password must be at least 8 characters!"),l();return}try{const t=await fetch("/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n.get("username"),password:i})});if(t.ok){const e=await t.json();w("Account created successfully! Redirecting..."),setTimeout(()=>{window.location.href="/login.html"},1500)}else{let e="Registration failed. Please try again.";if(t.status===400)e="Invalid input";else if(t.status===409)try{e=(await t.json()).error||"Username already taken! Please choose a different username."}catch{e="Username already exists. Please choose a different username."}else try{const d=await t.json();e=d.error||d.message||e}catch{try{e=await t.text()||e}catch{e=e||e}}throw new Error(e)}}catch(t){c(t.message||"Registration failed. Please try again."),l()}});function c(a){r.textContent=a}function w(a){r.textContent=a}function l(){o.classList.remove("loading"),o.disabled=!1}const m=document.getElementById("password"),s=document.getElementById("confirmPassword");s.addEventListener("input",()=>{s.value&&m.value!==s.value?s.setCustomValidity("Passwords do not match"):s.setCustomValidity("")});m.addEventListener("input",()=>{s.value&&m.value!==s.value?s.setCustomValidity("Passwords do not match"):s.setCustomValidity("")});
